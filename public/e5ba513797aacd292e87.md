---
title: Q.行ごとに対応した条件で変数を作る
tags:
  - R
  - tidyverse
private: false
updated_at: '2021-12-05T07:01:42+09:00'
id: e5ba513797aacd292e87
organization_url_name: null
slide: false
ignorePublish: false
---
さあそろそろネタがなくなってきましたw

これも誰得みたいな話なんですが，今回は次のようなケースです。

```R:
theta <- 0.6
lambda <- 3.5
N <- 10
sample <- data.frame(FLG= rbinom(N,size=1, prob = theta) )
```

上のコードを実行すると，次のようなデータフレームができます。

```
> sample
   FLG
1    1
2    1
3    1
4    0
5    0
6    1
7    1
8    0
9    1
10   1
```

ここで，FLGが0のところは0のままで，1になっているところは`lambda=3.5`のポアソン分布に従う乱数が入る，というようなデータを作りたい。

最初次のようなコードを書いていたんですが，エラーが出てうまくいきませんでした。
**どうしましょう。**

```R:
sample %>% 
  mutate(value = if_else(FLG==0, 0, rpois(1,lambda)))
```

```
 エラー: Problem with `mutate()` column `value`.
ℹ `value = if_else(FLG == 0, 0, rpois(1, lambda))`.
x `false` must be a double vector, not an integer vector.
```


[解答編はこちら。](https://qiita.com/advent-calendar/2021/r_tips_attack25_ans)
